<launch>

<node pkg="fisheye_gimbal" type="fisheye_gimbal_node" name="fisheye_gimbal_color">
        <remap from="~imu" to="/djiros/imu" />
        <remap from="~image" to="/fisheyecolor/image_raw" />
        <rosparam>
            # Path of calibration file generated by camera_model::MEI
            calibration_file_path: "/home/uav/catkin_ws/src/29900616_mei.yaml"
    
            # Camera intrinsic for a non-distortion pinhole model camera
            camera_parameters:
                width: 320 
                height: 240 
                fx: 120 
                fy: 120 
                cx: 160 
                cy: 120 
                # width: 94
                # height: 60
                # fx: 57.63
                # fy: 57.63
                # cx: 47.0
                # cy: 30.0
    
            # 3x3 rotation matrix from body to camera, row-major
            # bRc: [-1.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, -1.0]
            # bRc: [0.707107, 0.0, -0.707107, 0.0, -1.0, 0.0, -0.707107, 0.0, -0.707107]
            bRc: [1.0, 0.0, 0.0, 0.0, -1.0, 0.0, 0.0, 0.0, -1.0]
                
            # Orientation extract mode. Choose from: lock / yaw-free / custom
            orientation_extract_mode: yaw-free
                
            # Turn on/off some debug print out.
            debug_mode: false 
        </rosparam>

   </node>

<node name="circle_tracker" pkg="circle_tracker" type="circle_tracker">
    <param name="need_publish_image" type="bool" value="false" />

        <param name="red_H_low1" type="int" value="0" />
        <param name="red_S_low1" type="int" value="80" />
        <param name="red_V_low1" type="int" value="50" />
        <param name="red_H_high1" type="int" value="20" />
        <param name="red_S_high1" type="int" value="225" />
        <param name="red_V_high1" type="int" value="225" />
        <param name="red_H_low2" type="int" value="175" />
        <param name="red_S_low2" type="int" value="80" />
        <param name="red_V_low2" type="int" value="50" />
        <param name="red_H_high2" type="int" value="180" />
        <param name="red_S_high2" type="int" value="225" />
        <param name="red_V_high2" type="int" value="225" />

        <param name="green_H_low" type="int" value="70" />
        <param name="green_S_low" type="int" value="80" />
        <param name="green_V_low" type="int" value="20" />
        <param name="green_H_high" type="int" value="100" />
        <param name="green_S_high" type="int" value="200" />
        <param name="green_V_high" type="int" value="100" />

        <param name="background_H_low" type="int" value="90" />
        <param name="background_S_low" type="int" value="0" />
        <param name="background_V_low" type="int" value="70" />
        <param name="background_H_high" type="int" value="120" />
        <param name="background_S_high" type="int" value="100" />
        <param name="background_V_high" type="int" value="255" />

        <param name="background_H_low2" type="int" value="0" />
        <param name="background_S_low2" type="int" value="0" />
        <param name="background_V_low2" type="int" value="70" />
        <param name="background_H_high2" type="int" value="0" />
        <param name="background_S_high2" type="int" value="100" />
        <param name="background_V_high2" type="int" value="255" />

  <remap from="raw_image" to="/fisheye_gimbal_color/cropped/image"/>
  </node>


  <node name="gimbal_track" pkg="gimbal_track" type="gimbal_track"  output="screen" >
  <remap from="point" to="/EIS/direction"/>
  <remap from="odom" to="/odom"/>
  <remap from="robot_pose" to="/target_irobot"/>
  </node>

  <node name="track_color" pkg="track_color" type="track_color_node" >
    <!-- remap from="robot_pose" to="/target_irobot"/ -->
  </node>

</launch>
